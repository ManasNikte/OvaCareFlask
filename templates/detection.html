

{% extends "base.html" %}
{% block content %}
<style>
    h1 {
        text-align: center;
        font-family: Arial, sans-serif;
        margin-bottom: 20px;
    }
</style>
<br>
<h1>PCOD/PCOS Detection Form</h1>
<form id="predictForm">
    <!-- Age -->
    <div>
        <label for="age">Age:</label>
        <input type="number" id="age" name="age" required>
    </div>

    <!-- Weight -->
    <div>
        <label for="weight">Weight (in kg):</label>
        <input type="number" id="weight" name="weight" step="0.1" required>
    </div>

    <!-- Height -->
    <div>
        <label for="height">Height (in cm):</label>
        <input type="number" id="height" name="height" step="0.1" required>
    </div>

    <!-- BMI -->
    <div>
        <!-- <label for="bmi">Body Mass Index (BMI):</label> -->
        <input type="hidden" id="bmi" name="bmi" step="0.1" value="22" required>
    </div>

    <!-- Blood Group -->
    <div>
        <label for="blood_group">Blood Group:</label>
        <select id="blood_group" name="blood_group" required>
            <option value="A">A</option>
            <option value="B">B</option>
            <option value="AB">AB</option>
            <option value="O">O</option>
        </select>
    </div>

    <!-- Pulse Rate -->
    <div>
        <!-- <label for="pulse_rate">Pulse Rate (per minute):</label> -->
        <input type="hidden" id="pulse_rate" name="pulse_rate" value="72" required>
    </div>

    <!-- Respiratory Rate -->
    <div>
        <label for="rr">Respiratory Rate (per minute):</label>
        <input type="number" id="rr" name="rr" required>
    </div>

    <!-- Hemoglobin -->
    <div>
        <!-- <label for="hb">Hemoglobin Level (g/dL):</label> -->
        <input type="hidden" id="hb" name="hb" step="0.1" value="13.5" required>
    </div>

    <!-- Cycle Type -->
    <div>
        <label for="cycle_type">Menstrual Cycle Type:</label>
        <select id="cycle_type" name="cycle_type" required>
            <option value="R">Regular</option>
            <option value="I">Irregular</option>
        </select>
    </div>

    <!-- Cycle Length -->
    <div>
        <label for="cycle_length">Cycle Length (in days):</label>
        <input type="number" id="cycle_length" name="cycle_length" required>
    </div>

    <!-- Marriage Status -->
    <div>
        <label for="marriage_status">Marital Status:</label>
        <select id="marriage_status" name="marriage_status" required>
            <option value="1">Unmarried</option>
            <option value="2">Married</option>
            <option value="3">Divorced</option>
            <option value="4">Widowed</option>
        </select>
    </div>

    <!-- Pregnant -->
    <div>
        <label for="pregnant">Currently Pregnant:</label>
        <select id="pregnant" name="pregnant" required>
            <option value="Y">Yes</option>
            <option value="N">No</option>
        </select>
    </div>

    <!-- Abortions -->
    <div>
        <label for="abortions">Number of Abortions:</label>
        <input type="number" id="abortions" name="abortions" required>
    </div>

    <!-- Beta HCG -->
    <div>
        <!-- <label for="i_beta_hcg">Beta HCG I (mIU/mL):</label> -->
        <input type="hidden" id="i_beta_hcg" name="i_beta_hcg" step="0.1" value="2.5" required>
    </div>
    <div>
        <!-- <label for="ii_beta_hcg">Beta HCG II (mIU/mL):</label> -->
        <input type="hidden" id="ii_beta_hcg" name="ii_beta_hcg" step="0.1" value="2.5" required>
    </div>

    <!-- Follicle Stimulating Hormone -->
    <div>
        <!-- <label for="fsh">FSH Level (mIU/mL):</label> -->
        <input type="hidden" id="fsh" name="fsh" step="0.1" value="6" required>
    </div>

    <!-- Luteinizing Hormone -->
    <div>
        <!-- <label for="lh">LH Level (mIU/mL):</label> -->
        <input type="hidden" id="lh" name="lh" step="0.1" value="5" required>
    </div>

    <!-- FSH-LH Ratio -->
    <div>
        <!-- <label for="fsh_lh_ratio">FSH-LH Ratio:</label> -->
        <input type="hidden" id="fsh_lh_ratio" name="fsh_lh_ratio" step="0.1" value="1" required>
    </div>

    <!-- Hip -->
    <div>
        <!-- <label for="hip">Hip Circumference (in cm):</label> -->
        <input type="hidden" id="hip" name="hip" value="95"required>
    </div>

    <!-- Waist -->
    <div>
        <!-- <label for="waist">Waist Circumference (in cm):</label> -->
        <input type="hidden" id="waist" name="waist" value="7.5" required>
    </div>

    <!-- Waist-Hip Ratio -->
    <div>
        <!-- <label for="waist_hip_ratio">Waist-Hip Ratio:</label> -->
        <input type="hidden" id="waist_hip_ratio" name="waist_hip_ratio" step="0.1" value="0.7" required>
    </div>

    <!-- TSH -->
    <div>
        <!-- <label for="tsh">TSH Level (mIU/L):</label> -->
        <input type="hidden" id="tsh" name="tsh" step="0.1" value="2.5" required>
    </div>

    <!-- AMH -->
    <div>
        <!-- <label for="amh">AMH Level (ng/mL):</label> -->
        <input type="hidden" id="amh" name="amh" step="0.1" value="3" required>
    </div>

    <!-- PRL -->
    <div>
        <!-- <label for="prl">Prolactin (PRL) Level (ng/mL):</label> -->
        <input type="hidden" id="prl" name="prl" step="0.1" value="15" required>
    </div>

    <!-- Vitamin D -->
    <div>
        <!-- <label for="vit_d3">Vitamin D3 Level (ng/mL):</label> -->
        <input type="hidden" id="vit_d3" name="vit_d3" step="0.1" value="30" required>
    </div>

    <!-- Progesterone -->
    <div>
        <!-- <label for="prg">Progesterone (PRG) Level (ng/mL):</label> -->
        <input type="hidden" id="prg" name="prg" step="0.1" value="1" required>
    </div>

    <!-- Random Blood Sugar -->
    <div>
        <!-- <label for="rbs">Random Blood Sugar (mg/dL):</label> -->
        <input type="hidden" id="rbs" name="rbs" value="90" required>
    </div>

    <!-- Symptoms -->
    <div>
        <label for="weight_gain">Experiencing Weight Gain:</label>
        <select id="weight_gain" name="weight_gain" required>
            <option value="Y">Yes</option>
            <option value="N">No</option>
        </select>
    </div>

    <div>
        <label for="hair_growth">Excessive Hair Growth:</label>
        <select id="hair_growth" name="hair_growth" required>
            <option value="Y">Yes</option>
            <option value="N">No</option>
        </select>
    </div>

    <div>
        <label for="skin_darkening">Skin Darkening:</label>
        <select id="skin_darkening" name="skin_darkening" required>
            <option value="Y">Yes</option>
            <option value="N">No</option>
        </select>
    </div>

    <div>
        <label for="hair_loss">Hair Loss:</label>
        <select id="hair_loss" name="hair_loss" required>
            <option value="Y">Yes</option>
            <option value="N">No</option>
        </select>
    </div>

    <div>
        <label for="pimples">Pimples:</label>
        <select id="pimples" name="pimples" required>
            <option value="Y">Yes</option>
            <option value="N">No</option>
        </select>
    </div>

    <div>
        <label for="fast_food">Consumes Fast Food Regularly:</label>
        <select id="fast_food" name="fast_food" required>
            <option value="Y">Yes</option>
            <option value="N">No</option>
        </select>
    </div>

    <div>
        <label for="reg_exercise">Engages in Regular Exercise:</label>
        <select id="reg_exercise" name="reg_exercise" required>
            <option value="Y">Yes</option>
            <option value="N">No</option>
        </select>
    </div>

    <!-- Blood Pressure -->
    <div>
        <!-- <label for="bp_systolic">Systolic Blood Pressure (mmHg):</label> -->
        <input type="hidden" id="bp_systolic" name="bp_systolic" value="120" required>
    </div>

    <div>
        <!-- <label for="bp_diastolic">Diastolic Blood Pressure (mmHg):</label> -->
        <input type="hidden" id="bp_diastolic" name="bp_diastolic" value="80" required>
    </div>

    <!-- Follicle Count -->
    <div>
        <!-- <label for="follicle_no_l">Follicle Count (Left):</label> -->
        <input type="hidden" id="follicle_no_l" name="follicle_no_l" value="8" required>
    </div>

    <div>
        <!-- <label for="follicle_no_r">Follicle Count (Right):</label> -->
        <input type="hidden" id="follicle_no_r" name="follicle_no_r" value="8" required>
    </div>

    <!-- Follicle Size -->
    <div>
        <!-- <label for="avg_f_size_l">Avg Follicle Size (Left, mm):</label> -->
        <input type="hidden" id="avg_f_size_l" name="avg_f_size_l" step="0.1" value="16" required>
    </div>

    <div>
        <!-- <label for="avg_f_size_r">Avg Follicle Size (Right, mm):</label> -->
        <input type="hidden" id="avg_f_size_r" name="avg_f_size_r" step="0.1" value="16" required>
    </div>

    <!-- Endometrium -->
    <div>
        <!-- <label for="endometrium">Endometrium Thickness (mm):</label> -->
        <input type="hidden" id="endometrium" name="endometrium" step="0.1" value="8" required>
    </div>

    <!-- Serial Number -->
    <div>
        <!-- <label for="sl_no_y">Serial Number:</label> -->
        <input type="hidden" id="sl_no_y" name="Sl. No_y" value="0" required>
    </div>

    <button type="submit">Predict</button>
    <button onclick="location.href='/detection_advanced'">Advance Options</button>
</form>
<script>
    document.getElementById('predictForm').addEventListener('submit', function (e) {
        e.preventDefault();

        const formData = new FormData(this);
        const jsonData = Object.fromEntries(formData.entries());

        // Optional: Calculate BMI dynamically
        if (jsonData.weight && jsonData.height) {
            jsonData.bmi = (jsonData.weight / ((jsonData.height / 100) ** 2)).toFixed(2);
        }

        fetch('/predict', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(jsonData)
        })
            .then(response => response.json())
            .then(data => {
                if (data.prediction === 0) {
                    // Redirect to page for no PCOS
                    window.location.href = '/no-pcos';
                } else if (data.prediction === 1) {
                    // Redirect to page for PCOS
                    window.location.href = '/has-pcos';
                } else {
                    alert("Error: Unexpected response.");
                }
            })
            .catch(error => alert(`Error: ${error.message}`));
    });
</script>
{% endblock %}
